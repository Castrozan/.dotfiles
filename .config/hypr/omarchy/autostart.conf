exec-once = gnome-keyring-daemon --start --components=secrets
exec-once = swaybg -i ~/.config/omarchy/current/background -m fill || swaybg --color '#000000'
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store
exec-once = /run/current-system/sw/libexec/polkit-gnome-authentication-agent-1 || /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1

exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP HYPRLAND_INSTANCE_SIGNATURE
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

# Start graphical services after environment is imported
# Services have ConditionEnvironment=WAYLAND_DISPLAY so import must complete first
exec-once = sleep 2 && systemctl --user start waybar.service swaync.service hyprshell.service swayosd.service hypridle.service

# Restart portals: backends first, then main portal (must discover backends)
exec-once = sleep 3 && systemctl --user restart xdg-desktop-portal-hyprland xdg-desktop-portal-gtk && sleep 1 && systemctl --user restart xdg-desktop-portal
