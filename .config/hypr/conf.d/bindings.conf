# Keybindings

# ── App variables ──────────────────────────────────────────────────────────────

$terminal = wezterm
$fileManager = nautilus
$browser = brave
$editor = code

# ── Tiling / window management ────────────────────────────────────────────────

bindd = SUPER, W, Close window (cycle prev), exec, hypr-close-window-cycle
bindd = CTRL ALT, DELETE, Close all windows, exec, hyprctl clients -j | jq -r '.[].address' | xargs -I{} hyprctl dispatch closewindow address:{}

bindd = SUPER, J, Toggle split, togglesplit,
bindd = SUPER, P, Pseudo, pseudo,
bindd = SUPER, T, Toggle float, togglefloating,
bindd = SUPER, F, Maximize, fullscreen, 1
bindd = SUPER CTRL, F, Tiled fullscreen, fullscreenstate, 0 2
bindd = SUPER ALT, F, True fullscreen, fullscreen, 0
bindd = SUPER SHIFT, F, Full maximize, fullscreen, 0
bindd = SUPER, O, Pop out, exec, hyprctl dispatch togglefloating && hyprctl dispatch pin

bindd = SUPER, LEFT, Focus left, movefocus, l
bindd = SUPER, RIGHT, Focus right, movefocus, r
bindd = SUPER, UP, Focus up, movefocus, u
bindd = SUPER, DOWN, Focus down, movefocus, d

bindd = SUPER, 1, Workspace 1, workspace, 1
bindd = SUPER, 2, Workspace 2, workspace, 2
bindd = SUPER, 3, Workspace 3, workspace, 3
bindd = SUPER, 4, Workspace 4, workspace, 4
bindd = SUPER, 5, Workspace 5, workspace, 5
bindd = SUPER, 6, Workspace 6, workspace, 6
bindd = SUPER, 7, Workspace 7, workspace, 7
bindd = SUPER, 8, Workspace 8, workspace, 8
bindd = SUPER, 9, Workspace 9, workspace, 9
bindd = SUPER, 0, Workspace 10, workspace, 10

bindd = SUPER SHIFT, 1, Move to ws 1, exec, hypr-detach-from-group-and-move-to-workspace follow 1
bindd = SUPER SHIFT, 2, Move to ws 2, exec, hypr-detach-from-group-and-move-to-workspace follow 2
bindd = SUPER SHIFT, 3, Move to ws 3, exec, hypr-detach-from-group-and-move-to-workspace follow 3
bindd = SUPER SHIFT, 4, Move to ws 4, exec, hypr-detach-from-group-and-move-to-workspace follow 4
bindd = SUPER SHIFT, 5, Move to ws 5, exec, hypr-detach-from-group-and-move-to-workspace follow 5
bindd = SUPER SHIFT, 6, Move to ws 6, exec, hypr-detach-from-group-and-move-to-workspace follow 6
bindd = SUPER SHIFT, 7, Move to ws 7, exec, hypr-detach-from-group-and-move-to-workspace follow 7
bindd = SUPER SHIFT, 8, Move to ws 8, exec, hypr-detach-from-group-and-move-to-workspace follow 8
bindd = SUPER SHIFT, 9, Move to ws 9, exec, hypr-detach-from-group-and-move-to-workspace follow 9
bindd = SUPER SHIFT, 0, Move to ws 10, exec, hypr-detach-from-group-and-move-to-workspace follow 10

bindd = SUPER ALT, 1, Move silent ws 1, exec, hypr-detach-from-group-and-move-to-workspace silent 1
bindd = SUPER ALT, 2, Move silent ws 2, exec, hypr-detach-from-group-and-move-to-workspace silent 2
bindd = SUPER ALT, 3, Move silent ws 3, exec, hypr-detach-from-group-and-move-to-workspace silent 3
bindd = SUPER ALT, 4, Move silent ws 4, exec, hypr-detach-from-group-and-move-to-workspace silent 4
bindd = SUPER ALT, 5, Move silent ws 5, exec, hypr-detach-from-group-and-move-to-workspace silent 5
bindd = SUPER ALT, 6, Move silent ws 6, exec, hypr-detach-from-group-and-move-to-workspace silent 6
bindd = SUPER ALT, 7, Move silent ws 7, exec, hypr-detach-from-group-and-move-to-workspace silent 7
bindd = SUPER ALT, 8, Move silent ws 8, exec, hypr-detach-from-group-and-move-to-workspace silent 8
bindd = SUPER ALT, 9, Move silent ws 9, exec, hypr-detach-from-group-and-move-to-workspace silent 9
bindd = SUPER ALT, 0, Move silent ws 10, exec, hypr-detach-from-group-and-move-to-workspace silent 10

bindd = SUPER, S, Scratchpad, togglespecialworkspace, scratchpad
bindd = SUPER SHIFT, S, To scratchpad, exec, hyprctl --batch "dispatch moveoutofgroup; dispatch movetoworkspacesilent special:scratchpad; dispatch fullscreenstate 1 0"

bindd = SUPER, grave, Next workspace, workspace, e+1
bindd = SUPER SHIFT, grave, Prev workspace, workspace, e-1
bindd = SUPER CTRL, grave, Last workspace, workspace, previous

bindd = ALT, TAB, Cycle next, cyclenext
bindd = ALT, TAB, Bring to top, bringactivetotop
bindd = ALT SHIFT, TAB, Cycle prev, cyclenext, prev
bindd = ALT SHIFT, TAB, Bring to top, bringactivetotop

binded = SUPER SHIFT, RIGHT, Resize right, resizeactive, 100 0
binded = SUPER SHIFT, LEFT, Resize left, resizeactive, -100 0
binded = SUPER SHIFT, DOWN, Resize down, resizeactive, 0 100
binded = SUPER SHIFT, UP, Resize up, resizeactive, 0 -100

bindd = SUPER, mouse_down, Scroll ws fwd, workspace, e+1
bindd = SUPER, mouse_up, Scroll ws back, workspace, e-1
bindmd = SUPER, mouse:272, Move window, movewindow
bindmd = SUPER, mouse:273, Resize window, resizewindow

bindd = SUPER, G, Toggle group, exec, hypr-toggle-group-for-all-workspace-windows
bindd = SUPER SHIFT, G, Ungroup, moveoutofgroup
bindd = SUPER ALT, LEFT, Group left, moveintogroup, l
bindd = SUPER ALT, RIGHT, Group right, moveintogroup, r
bindd = SUPER ALT, UP, Group up, moveintogroup, u
bindd = SUPER ALT, DOWN, Group down, moveintogroup, d
bindd = SUPER ALT, TAB, Next in group, changegroupactive, f
bindd = SUPER ALT SHIFT, TAB, Prev in group, changegroupactive, b
bindd = SUPER ALT, mouse_down, Next in group, changegroupactive, f
bindd = SUPER ALT, mouse_up, Prev in group, changegroupactive, b

# ── Workspace grid navigation (CTRL ALT) ──────────────────────────────────────

$cols = 7

bindd = CTRL ALT, UP, Grid up, exec, hyprctl dispatch workspace $(( $(hyprctl activeworkspace -j | jq '.id') - $cols ))
bindd = CTRL ALT, DOWN, Grid down, exec, hyprctl dispatch workspace $(( $(hyprctl activeworkspace -j | jq '.id') + $cols ))
bindd = CTRL ALT, LEFT, Grid left, exec, hyprctl dispatch workspace $(( $(hyprctl activeworkspace -j | jq '.id') - 1 ))
bindd = CTRL ALT, RIGHT, Grid right, exec, hyprctl dispatch workspace $(( $(hyprctl activeworkspace -j | jq '.id') + 1 ))

bindd = CTRL ALT SHIFT, UP, Move win up, exec, hypr-detach-from-group-and-move-to-workspace follow $(( $(hyprctl activeworkspace -j | jq '.id') - $cols ))
bindd = CTRL ALT SHIFT, DOWN, Move win down, exec, hypr-detach-from-group-and-move-to-workspace follow $(( $(hyprctl activeworkspace -j | jq '.id') + $cols ))
bindd = CTRL ALT SHIFT, LEFT, Move win left, exec, hypr-detach-from-group-and-move-to-workspace follow $(( $(hyprctl activeworkspace -j | jq '.id') - 1 ))
bindd = CTRL ALT SHIFT, RIGHT, Move win right, exec, hypr-detach-from-group-and-move-to-workspace follow $(( $(hyprctl activeworkspace -j | jq '.id') + 1 ))

# ── Media keys ─────────────────────────────────────────────────────────────────

$osdclient = swayosd-client

bindeld = , XF86AudioRaiseVolume, Volume up, exec, $osdclient --output-volume raise
bindeld = , XF86AudioLowerVolume, Volume down, exec, $osdclient --output-volume lower
bindeld = , XF86AudioMute, Mute, exec, $osdclient --output-volume mute-toggle
bindeld = , XF86AudioMicMute, Mute microphone, exec, $osdclient --input-volume mute-toggle

bindeld = , XF86MonBrightnessUp, Brightness up, exec, $osdclient --brightness raise
bindeld = , XF86MonBrightnessDown, Brightness down, exec, $osdclient --brightness lower

# 1% adjustments with Alt modifier
bindeld = ALT, XF86AudioRaiseVolume, Volume up precise, exec, $osdclient --output-volume +1
bindeld = ALT, XF86AudioLowerVolume, Volume down precise, exec, $osdclient --output-volume -1
bindeld = ALT, XF86MonBrightnessUp, Brightness up precise, exec, $osdclient --brightness +1
bindeld = ALT, XF86MonBrightnessDown, Brightness down precise, exec, $osdclient --brightness -1

bindld = , XF86AudioNext, Next track, exec, playerctl next
bindld = , XF86AudioPause, Pause, exec, playerctl play-pause
bindld = , XF86AudioPlay, Play, exec, playerctl play-pause
bindld = , XF86AudioPrev, Previous track, exec, playerctl previous

# ── Clipboard ──────────────────────────────────────────────────────────────────

bindd = SUPER, C, Universal copy, sendshortcut, CTRL, Insert,
bindd = SUPER, X, Universal cut, sendshortcut, CTRL, X,
bindd = SUPER, V, Clipboard manager, exec, wezterm start -- clipse
bindd = SUPER CTRL, V, Clipboard history, exec, cliphist list | fuzzel --dmenu | cliphist decode | wl-copy

# ── App launchers ──────────────────────────────────────────────────────────────

bindd = SUPER, RETURN, Terminal, exec, $terminal
bindd = SUPER, E, Files, exec, $fileManager
bindd = SUPER, B, Summon Brave, exec, hypr-summon-brave
bindd = SUPER, N, Neovim, exec, $terminal -e nvim
bindd = SUPER, Q, Launcher, exec, hypr-super-launcher

bindd = SUPER, SPACE, Launcher, exec, fuzzel
bindd = SUPER, D, Show desktop, exec, hypr-show-desktop
bindd = SUPER CTRL, E, Emoji, exec, BEMOJI_PICKER_CMD="fuzzel --dmenu" bemoji -t
bindd = , XF86Calculator, Calculator, exec, gnome-calculator

# ── Theme controls ─────────────────────────────────────────────────────────────

bindd = SUPER CTRL, SPACE, Next background, exec, hypr-theme-bg-next
bindd = SUPER SHIFT CTRL, SPACE, Theme menu, exec, hypr-menu theme

# ── Bar & window controls ─────────────────────────────────────────────────────

bindd = SUPER SHIFT, SPACE, Toggle bar, exec, pkill waybar || waybar
bindd = SUPER, BACKSPACE, Toggle opacity, exec, hyprctl dispatch setprop "address:$(hyprctl activewindow -j | jq -r '.address')" opaque toggle

# ── Notifications ──────────────────────────────────────────────────────────────

bindd = SUPER, COMMA, Dismiss notif, exec, makoctl dismiss
bindd = SUPER SHIFT, COMMA, Clear all, exec, makoctl dismiss --all
bindd = SUPER CTRL, COMMA, Toggle DND, exec, makoctl set-mode -t do-not-disturb
bindd = SUPER SHIFT, N, Clear notifications, exec, makoctl dismiss --all

# ── Screenshots ────────────────────────────────────────────────────────────────

bindd = , PRINT, Screenshot, exec, hypr-screenshot annotate
bindd = SHIFT, PRINT, Screenshot window, exec, hyprshot -m window
bindd = CTRL, PRINT, Screenshot monitor, exec, hyprshot -m output
bindd = SUPER, PRINT, Color picker, exec, pkill hyprpicker || hyprpicker -a
bindd = ALT, PRINT, Record screen, exec, pkill wf-recorder || wf-recorder -g "$(slurp)" -f ~/Videos/recording-$(date +%Y%m%d-%H%M%S).mp4

# ── System ─────────────────────────────────────────────────────────────────────

bindd = SUPER CTRL, N, Network, exec, hypr-network
bindd = SUPER CTRL, L, Lock, exec, hyprlock --grace 1
bindd = SUPER, ESCAPE, Logout, exec, wlogout
bindld = , XF86PowerOff, Power menu, exec, wlogout
bindd = SUPER CTRL ALT, T, Show time, exec, notify-send "$(date +"%A %H:%M  —  %d %B %Y")"
bindd = SUPER CTRL, T, Btop, exec, $terminal -e btop

# ── Custom bindings ────────────────────────────────────────────────────────────

# Calendar popup
bindd = SUPER, Y, Toggle calendar, exec, ~/.config/waybar/calendar-toggle.sh

# Bluetooth quick menu
bindd = SUPER SHIFT, B, Bluetooth TUI, exec, wezterm start -- bluetui

# Voice input - whisper
bindd = ALT, A, Whisper input, exec, whisper-input

# Quick terminal with tmux
bindd = SHIFT ALT, 2, Tmux session, exec, wezterm start -- tmux new-session

# Workbench - Cursor editor
bindd = SUPER SHIFT, W, Workbench, exec, cursor $HOME/workbench

# Daily note - Obsidian
bindd = SUPER SHIFT, D, Daily note, exec, bash -c 'OBSIDIAN_HOME="$HOME/vault" EDITOR=code daily-note'

# Voxtype toggle
bindd = SHIFT ALT, A, Voxtype toggle, exec, bash -c 'if pgrep -f "voxtype record start" > /dev/null; then voxtype record stop; else voxtype record start; fi'

# Obsidian read it later
bindd = SUPER, R, Read it later, exec, xdg-open 'obsidian://adv-uri?commandid=obsidian-read-it-later%3Asave-clipboard-to-notice'

# Audio mixer TUI (wiremix)
bindd = SUPER SHIFT, A, Audio mixer, exec, wezterm start -- wiremix
