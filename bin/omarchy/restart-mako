#!/usr/bin/env bash

BASE_CONFIG="$HOME/.config/mako/config"
THEME_COLORS="$HOME/.config/omarchy/current/theme/mako.ini"
MERGED_CONFIG="$HOME/.cache/omarchy/mako-merged.ini"

mkdir -p "$(dirname "$MERGED_CONFIG")"

pkill -x mako

if [[ -f "$THEME_COLORS" ]]; then
  { cat "$BASE_CONFIG"; echo ""; cat "$THEME_COLORS"; } > "$MERGED_CONFIG"
  setsid mako -c "$MERGED_CONFIG" >/dev/null 2>&1 &
else
  setsid mako -c "$BASE_CONFIG" >/dev/null 2>&1 &
fi
