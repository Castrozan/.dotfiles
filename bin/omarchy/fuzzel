#!/usr/bin/env bash
# Wrapper for fuzzel that merges base config with theme colors

BASE_CONFIG="$HOME/.config/fuzzel/fuzzel.ini"
THEME_COLORS="$HOME/.config/omarchy/current/theme/fuzzel.ini"
MERGED_CONFIG="$HOME/.cache/omarchy/fuzzel-merged.ini"

mkdir -p "$(dirname "$MERGED_CONFIG")"

if [[ -f "$THEME_COLORS" ]]; then
  { cat "$BASE_CONFIG"; echo ""; cat "$THEME_COLORS"; } > "$MERGED_CONFIG"
  exec /usr/bin/env fuzzel --config="$MERGED_CONFIG" "$@"
else
  exec /usr/bin/env fuzzel "$@"
fi
